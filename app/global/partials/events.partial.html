<ion-view view-title="Accueil">
    <ion-nav-buttons side="right">
        <button class="button button-clear"
                ng-click="!DataService.isFetching() && DataService.update()"
                ng-switch="DataService.isFetching()">
            <ion-spinner icon="lines"
                         class="spinner-light"
                         ng-switch-when="true"></ion-spinner>

            <span ng-switch-when="false">Actualiser</span>
        </button>
    </ion-nav-buttons>

    <ion-content>
        <h3 class="padding-top padding-left">Prochains évènements</h3>

        <div class="list">
            <a class="item item-icon-right"
               ng-repeat="event in events"
               ui-sref="main.event({eventId: event.id})">
                <h2 ng-bind-html="event.title"></h2>

                <i class="icon ion-chevron-right"></i>

                <p ng-if="event.categories.length">
                    <em ng-bind-html="event.categories[0]"></em>
                </p>

                <p>
                    {{ event.date_end }}
                    <span ng-if="event.date_start !== event.date_end">
                        → {{ event.date_end }}
                    </span>
                </p>
            </a>
        </div>
    </ion-content>
</ion-view>
